# Render Deployment Guide for SignalTrust AI Scanner

This guide explains how to deploy SignalTrust AI Scanner on Render.com.

## Prerequisites

- Render.com account (free or paid)
- GitHub account with this repository
- OpenAI API key (optional but recommended for AI features)

## Deployment Options

### Option 1: Using render.yaml (Recommended)

1. **Fork or clone this repository to your GitHub account**

2. **Go to Render Dashboard**
   - Visit https://dashboard.render.com
   - Click "New +" and select "Blueprint"

3. **Connect your repository**
   - Select this repository
   - Render will automatically detect the `render.yaml` file

4. **Configure environment variables**
   - Set your `OPENAI_API_KEY` (required for AI features)
   - Set other API keys as needed (see below)
   - Click "Apply"

5. **Deploy**
   - Render will build and deploy your application
   - Your app will be available at: `https://your-app-name.onrender.com`

### Option 2: Manual Web Service Setup

1. **Go to Render Dashboard**
   - Visit https://dashboard.render.com
   - Click "New +" and select "Web Service"

2. **Connect your repository**
   - Select this repository
   - Give it a name (e.g., `signaltrust-ai-scanner`)

3. **Configure the service**
   - **Environment**: Python 3
   - **Region**: Choose your preferred region
   - **Branch**: main
   - **Build Command**: `./build.sh`
   - **Start Command**: `./start-render.sh`
   - **Plan**: Free (or upgrade as needed)

4. **Add environment variables** (see below)

5. **Deploy**
   - Click "Create Web Service"
   - Wait for deployment to complete

## Required Environment Variables

### Essential Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `PORT` | Port number (auto-generated by Render) | auto |
| `SECRET_KEY` | Flask secret key (auto-generated) | auto |
| `FLASK_ENV` | Environment mode | production |
| `PYTHON_VERSION` | Python version | 3.11.11 |

### AI Configuration (Recommended)

| Variable | Description | Required |
|----------|-------------|----------|
| `OPENAI_API_KEY` | Your OpenAI API key | Yes for AI features |
| `OPENAI_MODEL` | Model to use | No (default: gpt-4o-mini) |
| `AI_PROVIDER` | AI provider (openai/anthropic/local) | No (default: openai) |

### Optional API Keys

| Variable | Description |
|----------|-------------|
| `COINGECKO_API_KEY` | CoinGecko API key for crypto data |
| `ALPHAVANTAGE_API_KEY` | Alpha Vantage API key for stock data |
| `WHALEALERT_API_KEY` | Whale Alert API key for whale watching |
| `NEWS_CATCHER_API_KEY` | News Catcher API key for news aggregation |

### Agent Configuration (Optional)

| Variable | Description |
|----------|-------------|
| `AGENT_API_BASE_URL` | Base URL for agent API |
| `AGENT_API_KEY` | Agent API authentication key |
| `AGENT_STOCK_ID` | Stock agent ID |
| `AGENT_CRYPTO_ID` | Crypto agent ID |
| `AGENT_WHALE_ID` | Whale agent ID |
| `AGENT_SITE_ID` | Site analysis agent ID |
| `AGENT_SUPERVISOR_ID` | Supervisor agent ID |

## Setting Environment Variables on Render

1. Go to your service dashboard
2. Click "Environment" tab
3. Add each variable:
   - Key: Variable name (e.g., `OPENAI_API_KEY`)
   - Value: Your actual value
   - Click "Add Environment Variable"
4. Click "Save Changes"
5. Your service will automatically redeploy

## Health Checks

The application includes a health check endpoint at `/health` which returns:

```json
{
  "status": "healthy",
  "service": "SignalTrust AI Scanner",
  "timestamp": "2024-02-08T10:30:00Z"
}
```

Render automatically monitors this endpoint to ensure your service is running properly.

## Troubleshooting

### Build Fails

**Problem**: Build command fails
**Solution**: 
- Check that `build.sh` has execute permissions
- Verify `requirements.txt` is present
- Check build logs in Render dashboard

### App Won't Start

**Problem**: Service starts but becomes unhealthy
**Solution**:
- Check logs in Render dashboard
- Verify all required environment variables are set
- Ensure `PORT` environment variable is not manually set (Render sets it automatically)

### AI Features Not Working

**Problem**: AI predictions/analysis not working
**Solution**:
- Verify `OPENAI_API_KEY` is set correctly
- Check that you have credits in your OpenAI account
- Review logs for API errors

### Python Version Issues

**Problem**: Python version mismatch
**Solution**:
- The app uses Python 3.11.11 (specified in `runtime.txt` and `.python-version`)
- Render automatically detects and uses the correct version
- If issues persist, try setting `PYTHON_VERSION=3.11.11` in environment variables

## Free Tier Limitations

Render's free tier includes:

- **Bandwidth**: 100 GB/month
- **Hours**: Services sleep after 15 minutes of inactivity
- **Cold starts**: ~30 seconds to wake up
- **Build minutes**: 500 minutes/month

For production use, consider upgrading to a paid plan for:
- No sleep/cold starts
- More resources
- Better performance
- Persistent storage

## Upgrading Your Plan

To upgrade your service:

1. Go to your service dashboard
2. Click "Settings" tab
3. Scroll to "Instance Type"
4. Select a paid plan (Starter, Standard, or Pro)
5. Click "Save Changes"

## Monitoring

Render provides built-in monitoring:

- **Metrics**: CPU, memory, and bandwidth usage
- **Logs**: Real-time application logs
- **Events**: Deployment and health check events
- **Alerts**: Email notifications for failures

Access these in your service dashboard.

## Backups

The application creates local backups in the `data/` directory. However, **Render's free tier does not persist data across deploys**.

For persistent storage:

1. **Option A**: Use cloud storage (AWS S3, Google Cloud Storage, Azure Blob)
   - Set `CLOUD_PROVIDER` environment variable
   - Add cloud provider credentials
   - Enable `CLOUD_AUTO_SYNC=true`

2. **Option B**: Use Render's persistent disk (paid plans only)
   - Add a disk in service settings
   - Mount it to your data directory

## Automatic Deploys

Render can automatically deploy when you push to GitHub:

1. Go to service Settings
2. Enable "Auto-Deploy"
3. Select your branch (e.g., `main`)
4. Every push will trigger a new deployment

## Custom Domain

To use a custom domain:

1. Go to service Settings
2. Click "Custom Domains"
3. Add your domain
4. Configure DNS records as shown
5. Render provides free SSL certificates

## Support

- **Render Documentation**: https://render.com/docs
- **Render Community**: https://community.render.com
- **Application Issues**: Create an issue in this repository

## Security Best Practices

1. **Never commit API keys** to your repository
2. **Use environment variables** for all sensitive data
3. **Enable HTTPS** (automatic on Render)
4. **Rotate API keys** regularly
5. **Monitor access logs** for suspicious activity
6. **Use strong SECRET_KEY** (auto-generated by Render)

## Cost Optimization

To minimize costs:

1. Use **free tier** for development/testing
2. Enable **auto-scaling** on paid plans
3. Use **gpt-4o-mini** instead of gpt-4 (10x cheaper)
4. Enable **compression** for cloud storage
5. Set appropriate **timeout values** to prevent long-running requests

## Next Steps

After deployment:

1. Visit your app URL
2. Create an admin account
3. Configure your settings
4. Add your API keys
5. Start scanning markets!

## Getting Help

If you encounter issues:

1. Check the Render logs
2. Review this documentation
3. Check the main README.md
4. Create an issue on GitHub
5. Contact Render support for platform issues

---

**Happy Trading! ðŸ“ˆðŸš€**
